{"ast":null,"code":"var _jsxFileName = \"/home/clayton/Desktop/Dev/Authentication_Template/Authentication_Template/client/src/components/auth/SignIn.js\";\nimport React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport { SIGNIN_USER } from '../../queries/index';\nimport Error from '../error';\nimport { withRouter } from 'react-router-dom';\nconst initialState = {\n  username: \"\",\n  password: \"\"\n};\n\nclass Signin extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...initialState\n    };\n\n    this.clearState = () => {\n      this.setState({ ...initialState\n      });\n    };\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = (e, signInUser) => {\n      e.preventDefault();\n      signInUser().then(async ({\n        data\n      }) => {\n        console.log(data);\n        localStorage.setItem('token', data.signInUser.token);\n        await this.props.refetch();\n        this.clearState();\n        this.props.history.push('/');\n      });\n    };\n\n    this.validateForm = () => {\n      const {\n        username,\n        password\n      } = this.state;\n      const isInvalid = !username || !password;\n      return isInvalid;\n    };\n  }\n\n  render() {\n    const {\n      username,\n      password\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, \"Sign In\"), /*#__PURE__*/React.createElement(Mutation, {\n      mutation: SIGNIN_USER,\n      variables: {\n        username,\n        password\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, (signInUser, {\n      data,\n      loading,\n      error\n    }) => {\n      console.log({\n        error\n      });\n\n      if (error) {\n        return /*#__PURE__*/React.createElement(\"form\", {\n          className: \"form\",\n          onSubmit: e => this.handleSubmit(e, signInUser),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          value: username,\n          onChange: this.handleChange,\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Username\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"input\", {\n          value: password,\n          onChange: this.handleChange,\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          disabled: loading || this.validateForm(),\n          type: \"submit\",\n          className: \"button-primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 37\n          }\n        }, \"Submit\"), error && /*#__PURE__*/React.createElement(Error, {\n          error: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 47\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"form\", {\n          className: \"form\",\n          onSubmit: e => this.handleSubmit(e, signInUser),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          value: username,\n          onChange: this.handleChange,\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Username\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"input\", {\n          value: password,\n          onChange: this.handleChange,\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          disabled: loading || this.validateForm(),\n          type: \"submit\",\n          className: \"button-primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 37\n          }\n        }, \"Submit\"), error && /*#__PURE__*/React.createElement(Error, {\n          error: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 47\n          }\n        }));\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(Signin);","map":{"version":3,"sources":["/home/clayton/Desktop/Dev/Authentication_Template/Authentication_Template/client/src/components/auth/SignIn.js"],"names":["React","Mutation","SIGNIN_USER","Error","withRouter","initialState","username","password","Signin","Component","state","clearState","setState","handleChange","e","name","value","target","handleSubmit","signInUser","preventDefault","then","data","console","log","localStorage","setItem","token","props","refetch","history","push","validateForm","isInvalid","render","loading","error"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Mutation} from \"react-apollo\";\nimport {SIGNIN_USER} from '../../queries/index';\nimport Error from '../error';\nimport { withRouter } from 'react-router-dom';\n\nconst initialState = {\n    username: \"\",\n    password: \"\"\n}\n\nclass Signin extends React.Component{\n    state = {...initialState}\n    clearState = () =>{\n        this.setState({...initialState});\n    }\n\n    handleChange = (e)=>{\n        const { name, value } = e.target;\n        this.setState({[name]:value})\n    }\n\n    handleSubmit = (e, signInUser)=>{\n        e.preventDefault();\n        signInUser().then(async ({data}) => {\n            console.log(data)\n            localStorage.setItem('token', data.signInUser.token);\n            await this.props.refetch();\n            this.clearState();\n            this.props.history.push('/');\n        })\n    }\n    validateForm = () =>{\n        const {username, password} = this.state;\n        const isInvalid = !username || !password;\n        return isInvalid;\n    }\n    render(){\n        const {username, password} = this.state;\n        return(\n            <div className = \"App\">\n                <h2 className=\"form\">Sign In</h2>\n                <Mutation mutation={SIGNIN_USER} variables={{username, password}}>\n                    {(signInUser, {data, loading, error})=> {\n                        console.log({error})\n                        if (error){\n                            return (\n                                <form className=\"form\" onSubmit={e => this.handleSubmit(e, signInUser)} >\n                                    <input value={username} onChange={this.handleChange} type=\"text\" name=\"username\" placeholder=\"Username\"></input>\n                                    <input value={password} onChange={this.handleChange} type=\"password\" name=\"password\" placeholder=\"Password\"></input>\n                                    <button disabled={loading || this.validateForm()} type=\"submit\" className=\"button-primary\">Submit</button>\n                                    {error && <Error error ={error}/>}\n\n                                </form>\n                            )\n                        } else {\n                            return (\n                                <form className=\"form\" onSubmit={e => this.handleSubmit(e, signInUser)} >\n                                    <input value={username} onChange={this.handleChange} type=\"text\" name=\"username\" placeholder=\"Username\"></input>\n                                    <input value={password} onChange={this.handleChange} type=\"password\" name=\"password\" placeholder=\"Password\"></input>\n                                    <button disabled={loading || this.validateForm()} type=\"submit\" className=\"button-primary\">Submit</button>\n                                    {error && <Error error ={error}/>}\n    \n                                </form>\n                            )\n                        }\n                        \n                    }}\n\n                </Mutation>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Signin);"]},"metadata":{},"sourceType":"module"}